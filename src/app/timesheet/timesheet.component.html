<!-- <div class="tabs">
  <a routerLink="/timesheet" routerLinkActive="active-tab" class="tab-link">
    <i class="pi pi-table"></i> My Timesheet
  </a>
  <a routerLink="/submitted" routerLinkActive="active-tab" class="tab-link">
    <i class="pi pi-check-square"></i> Submitted Timesheet
  </a>
</div> -->
<!-- <div class="timesheet-toolbar"> -->
  <!-- View Options -->
  <!-- <div class="view-toggle">
  <p-buttonGroup>
    <p-button label="Month" class="p-button-sm p-button-text"></p-button>
    <p-button label="Week" class="p-button-sm p-button-outlined"></p-button>
  </p-buttonGroup>m p-button-text"></p-button>
    <p-button label="Day" class="p-button-s
</div> -->
  <!-- <div class="view-control">
  <div class="view-tab">
    <button class="nav-btn"><i class="pi pi-calendar"> month</i></button>
    <button class="nav-btn"><i class="pi pi-calendar"> month</i></button>
    <button class="nav-btn"><i class="pi pi-calendar"> month</i></button>
  </div>
  </div>
</div> -->

  <!-- <div class="btn-group btn-group-sm" role="group">
    <button type="button" class="btn btn-outline-secondary">Month</button>
    <button type="button" class="btn btn-outline-danger active">Week</button>
    <button type="button" class="btn btn-outline-secondary">Day</button>
  </div>

  Date Navigation -->
<!-- <div class="date-navigation">
  <button pButton icon="pi pi-angle-left" class="p-button-text p-button-sm"></button>
  <span class="date-range">Jun 16, 2025 - Jun 22, 2025</span>
 
</div> -->


  <!-- Summary + Submit -->
  <!-- <div class="summary-submit">
    <span class="logged">00:00 hrs</span>
    <small>Logged Hours</small>
    <span class="submitted ml-3">00:00 hrs</span>
    <small>Submitted Hours</small>
    <p-splitButton label="Submit" [model]="submitOptions" class="ml-3"
      styleClass="p-button-sm p-button-primary"></p-splitButton>
  </div>


</div> -->
  <!-- <div class="p-m-4">
<nav class="main-nav">
  <a routerLink="/timesheet" routerLinkActive="active-link">
    <i class="pi pi-clock"></i>
    Timesheet
  </a>
  <a routerLink="/reports" routerLinkActive="active-link">
    <i class="pi pi-chart-bar"></i>
    Reports
  </a>
</nav>
  <p-table [value]="projects" dataKey="id" expandableRows>
    <ng-template pTemplate="header">
      <tr>
        <th>Project</th>
        <th>Description</th>
        <th>Billable</th>
        <th *ngFor="let day of days">{{ day }}</th>
        <th>Add Task</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-project>
      <tr>
        <td [attr.rowspan]="filterTasks(project.tasks).length + 1">{{ project.name }}</td>
      </tr>
      <ng-container *ngFor="let task of filterTasks(project.tasks)">
        <tr>
          <td>
            <input pInputText [(ngModel)]="task.description" (ngModelChange)="save()" placeholder="Task description">
          </td>
          <td>
            <p-toggleButton [(ngModel)]="task.billable" onLabel="Yes" offLabel="No" (onChange)="toggleBillable(task)"></p-toggleButton>
          </td>
          <td *ngFor="let day of days">
            <input type="number" pInputText [(ngModel)]="task.hours[day]" min="0" (ngModelChange)="onHourChange()" style="width: 60px;">
          </td>
          <td>
            <button pButton icon="pi pi-plus" (click)="addTask(project)" class="p-button-sm"></button>
          </td>
        </tr>
      </ng-container>
    </ng-template>
  </p-table>

  <div class="p-mt-3">
    <strong>Total Hours: {{ totalHours }}</strong>
    <button pButton label="Submit" class="p-ml-3" (click)="submit()"></button>
  </div>
</div> -->
 
<div class="tab-navigation">
    <div class="tab active">
      <i class="pi pi-calendar"></i>
      <span>My Timesheet</span>
    </div>
    <div class="tab">
      <i class="pi pi-check-square"></i>
      <span>Submitted Timesheet</span>
    </div>
  </div>
 

  <div class="view-controls">
    <div class="view-tabs">
      <p-button class="view-tab">Month</p-button>
      <p-button class="view-tab active">Week</p-button>
      <p-button class="view-tab ">Day</p-button>
    </div>
    <div class="date-navigation">
      <button class="nav-btn"><i class="pi pi-chevron-left"></i></button>
      <button class="nav-btn"><i class="pi pi-chevron-right"></i></button>
      <button class="calendar-btn"><i class="pi pi-calendar-times"></i></button>
    </div>
     <div class="hour-summary">
      <div class="logged-hours">
        <span class="hour-value">00:00 hrs</span>
        <span class="hour-label">Logged Hours</span>
      </div>
      <div class="submitted-hours">
        <span class="hour-value">00:00 hrs</span>
        <span class="hour-label">Submitted Hours</span>
      </div>
      <div class="action-buttons">
        <p-button class="project-btn" icon="pi pi-plus" label="Project"   (click)="openModal()"/>
        <p-button label="Submit" class="submit-btn" [raised]="true" severity="info"/>
        <p-button class="options-btn"><i class="pi pi-chevron-down"></i></p-button >
      </div>
    </div>      
  </div>  
 

   
 
<!-- <p-table [value]="projects" dataKey="id" expandableRows> 
 
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 3rem;"></th>  
      <th>Project / Task</th>
      <th>Description</th>
      <th>Billable</th>
      <th *ngFor="let day of weekDays">{{ day }}</th>
    </tr>
  </ng-template>  

 
  <ng-template pTemplate="body" let-project>
    <tr>
      ✅ leave this cell empty, PrimeNG will render the toggle icon
     <td></td>
      <td>{{ project.name }}</td>
      <td colspan="100%"></td>
    </tr>
  </ng-template>  

 
  <ng-template pTemplate="rowexpansion" let-project>
    <tr *ngFor="let task of project.tasks">
      <td></td>
      <td>→ Task</td>
      <td>
        <input pInputText [(ngModel)]="task.description" (ngModelChange)="save()" />
      </td>
      <td>
        <p-inputSwitch [(ngModel)]="task.billable" (ngModelChange)="save()"></p-inputSwitch>
      </td>
      <td *ngFor="let day of weekDays">
        <p-inputNumber [(ngModel)]="task.hours[day]" (ngModelChange)="save()" inputStyle="width: 60px"></p-inputNumber>
      </td>
    </tr>

     <tr>
      <td colspan="10">
        <button pButton label="+ Add Task" (click)="addTask(project)" class="p-button-sm p-button-text"></button>
      </td>
    </tr>
     <tr> 
  <td colspan="10">
    <button
      pButton
      class="p-button-sm p-button-text"
      (click)="addTask(project)">
      + Add Task
    </button>
  </td>
</tr>
  </ng-template>

  
  <ng-template pTemplate="footer">
    <tr>
      <td colspan="4" class="text-end fw-bold">Total</td>
      <td *ngFor="let day of weekDays" class="fw-bold">{{ getTotal(day) }}</td>
    </tr>
  </ng-template>
</p-table>   -->
<p-table [value]="projects" dataKey="id" [tableStyle]="{'min-width': '1000px'}" [(expandedRowKeys)]="expandedRows">
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 40px"></th>
      <th>Projects / Tasks</th>
      <th>Description <span class="header-date">(Jun 19)</span></th>
      <th>Billability <span class="header-date">(Jun 19)</span></th>
      <th *ngFor="let day of days">
        {{ day.label }}<br>
        <span class="header-date">{{ day.date }}</span>
      </th>
    </tr>
  </ng-template>

  <!-- Project Row -->
  <ng-template pTemplate="body" let-project>
    <tr>
      <td>
        <button pRowToggler [rowData]="project" class="p-button-text p-button-sm"
          [icon]="expandedRows[project.id] ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
      </td>
      <td>
        <i class="pi pi-file project-icon"></i>
        {{ project.name }}
      </td>
      <td></td>
      <td></td>
      <td *ngFor="let day of days" class="day-cell"></td>
    </tr>
  </ng-template>

  <!-- Expanded Row: Show "+ Task" and Task Details -->
  <ng-template pTemplate="rowexpansion" let-project>
    <tr>
      <td></td>
      <td colspan="3">
        <button pButton label="+ Task" class="p-button-text p-button-sm add-task-btn"
          (click)="addTask(project)"></button>
      </td>
      <td *ngFor="let day of days" class="day-cell">00:00</td>
    </tr>
    <!-- Example: Show tasks if you want -->
    <!--
    <tr *ngFor="let task of project.tasks">
      <td></td>
      <td colspan="3">{{ task.name }}</td>
      <td *ngFor="let day of days" class="day-cell">{{ task.hours[day.label] | number:'2.0-2' }}</td>
    </tr>
    -->
  </ng-template>

  <!-- Footer for Totals -->
  <ng-template pTemplate="footer">
    <tr class="total-row">
      <td colspan="4" style="text-align:right; color:#1976d2; font-weight:600;">Total</td>
      <td *ngFor="let day of days" style="color:#1976d2; font-weight:600;">00:00</td>
    </tr>
  </ng-template>
</p-table>
